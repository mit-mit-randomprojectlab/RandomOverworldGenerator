from __future__ import print_function
import earclipping, time

if __name__ == "__main__":

	#Troublesome shape 1
	outer = [(245.51295164960902, 200.51786044193432), (250.75908474007156, 199.64758509478997), (250.4499581856653, 197.55796768167056), (250.13731995015405, 197.64375273743644), (250.11891458684113, 195.75808125850745), (248.7198938272195, 196.09440185246058), (247.57243932399433, 196.85829312517308), (246.24450444395188, 196.8713153382996), (244.58227363193873, 196.44094050931744), (241.43386244261637, 200.11115539097227), (241.6678048161557, 200.41491713910364), (243.15231527818833, 200.37556044757366), (243.15634513052646, 200.78910711687058)]
	inner = [[(246.48213658179156, 198.39915901515633), (246.42675784626044, 197.79595325910486), (247.15166412526742, 197.6895853469614), (247.27367794327438, 198.35831062297802)], [(249.46766954858322, 196.6411824093666), (249.467346645426, 196.60809894255362), (249.71278333454393, 196.40717090445105), (249.71536644315347, 196.67183858621866)], [(248.97049673367292, 196.41445369680878), (248.96920547052287, 196.28212083445396), (249.2987436054973, 196.23752915277146), (248.97170737280976, 196.53851688443683)]]

	startTime = time.time()
	pts, triangles = earclipping.EarClipping(outer, inner)
	print("Ear clipping shape 1, done in", time.time() - startTime, "sec")

	#Troublesome shape 2 with duplicate point in inner holes
	outer = [(518.9284936488839, 145.1064817814622), (521.1901975739747, 144.47910999285523), (527.3684891548473, 143.7198113980703), (530.7563681892352, 142.7167870157864), (536.5685753829312, 140.07557564647868), (538.4148708374705, 139.9569785820786), (538.627922955784, 139.82241540052928), (538.6170583686326, 138.7804380231537), (534.9902868078789, 139.00866582698654), (515.3627754258923, 143.28278617328033), (515.3437315963674, 141.44690634845756), (513.8052020524628, 134.65645753755234), (511.3028361875331, 127.98366742115468), (510.08300885243807, 125.6806833955925), (508.2263824775582, 117.63679207186215), (507.82867088273633, 116.66505634272471), (507.5803207834251, 116.57667019043583), (507.57338509405963, 115.90686149406247), (507.3424711242551, 115.90926626138389), (507.0617609793553, 115.08517671795562), (505.6501426276518, 113.36323298071511), (504.2143437054474, 110.90542681608349), (503.9621812752448, 109.65100709418766), (504.2823005762184, 108.70498085254803), (506.65244281326886, 107.41501169640105), (506.98482422030065, 106.85746553447098), (506.52432098193094, 103.80247064575087), (505.7793554441305, 101.94958485430107), (505.2716848105192, 101.50002584722824), (504.2142602854874, 96.54922938230447), (500.8110233991174, 92.84678881301079), (496.7163285849383, 90.85499475931283), (488.2449999389937, 90.71960734389722), (484.75095491472166, 90.1852057708893), (477.27074461465236, 90.18810603255406), (473.62606261868495, 91.04447026900016), (470.2782182159135, 99.93576274462976), (471.15873975586146, 99.74473569204565), (472.76615905365907, 98.85980525065679), (473.5499226608081, 99.6869581521023), (474.1006542330142, 101.11186539230403), (472.04502100741956, 101.72025937377475), (472.37333096866496, 104.77664095815271), (471.5487350546755, 105.5956089606043), (469.86027289077174, 105.81152069626842), (470.15188321622554, 106.10622802609578), (469.79274780035485, 107.26772698806599), (471.5667410270544, 107.34865062474273), (474.77661071217153, 105.89306018082425), (476.27769036439713, 103.49589496850967), (474.7698088908801, 106.0337197361514), (471.3631195682101, 107.59885189170018), (469.82929993630387, 107.61460534390062), (469.32679138414096, 110.88643994985614), (469.9366951485863, 112.45136900944635), (471.91771607496776, 114.21724858414382), (472.73832279792987, 114.61400715913624), (475.68944202468265, 115.26166151312646), (502.1062499897089, 125.58175556524657), (504.45963522512466, 133.0169918886386), (506.9237995437579, 139.19414451776538), (506.8609896666603, 141.89092740998603), (507.1526463624323, 142.17736312770285), (511.52796632866375, 143.33930501551367), (514.1989100676728, 144.78364187083207), (517.3222946607275, 145.32174009818118)]

	inner = [[(478.45079928741325, 99.07395080057904), (478.6928384738276, 98.5504504730925), (479.88315049163066, 98.0088702547364), (478.77572992118075, 98.5909418174997), (478.2169211098226, 99.58909746701829)], [(479.88315049163066, 98.0088702547364), (480.6145451257471, 97.75329232774675), (481.61161635431927, 97.66854601539671), (480.2942888109246, 97.88884011632763)], [(476.47918140806723, 103.0389685324626), (476.7058372270549, 102.62313110870309), (477.2399133926956, 101.62522683932912), (476.24427848041523, 103.45489095826633)], [(477.8847631078679, 100.17141944624018), (478.04629361908883, 99.83895675092936), (478.12875992723275, 99.83810338913463), (477.7232323633507, 100.50388331746217)]]

	try:
		pts, triangles = earclipping.EarClipping(outer, inner, debug=0)
	except ValueError as err:
		print("Expected ValueError (Duplicate inner polygon point). Got:", err)


